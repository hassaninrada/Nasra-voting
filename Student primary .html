<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Primary Student Login</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    .login-box {
      background: #ffffffee;
      padding: 40px 30px;
      border-radius: 20px;
      box-shadow:
        0 4px 30px rgba(0, 0, 0, 0.1),
        0 0 0 1px rgba(255, 255, 255, 0.3);
      width: 320px;
      max-width: 90vw;
      text-align: center;
      transition: transform 0.3s ease;
    }

    .login-box:hover {
      transform: scale(1.03);
    }

    h2 {
      margin-bottom: 30px;
      color: #0f2a65;
      font-weight: 700;
      font-size: 2rem;
      letter-spacing: 1.2px;
    }

    input[type="text"] {
      width: 100%;
      padding: 14px 18px;
      font-size: 1rem;
      border-radius: 10px;
      border: 2px solid #b0c4de;
      outline: none;
      transition: border-color 0.3s ease;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    input[type="text"]:focus {
      border-color: #0f2a65;
      box-shadow: 0 0 8px #0f2a65aa;
    }

    button {
      margin-top: 25px;
      width: 100%;
      background: linear-gradient(135deg, #0f2a65, #00aaff);
      border: none;
      color: white;
      font-size: 1.1rem;
      padding: 14px 0;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
      letter-spacing: 0.5px;
      box-shadow: 0 6px 12px rgba(0, 170, 255, 0.4);
      transition: background 0.4s ease, box-shadow 0.4s ease;
    }

    button:hover {
      background: linear-gradient(135deg, #004080, #0099ff);
      box-shadow: 0 10px 20px rgba(0, 153, 255, 0.6);
    }

    .error {
      margin-top: 15px;
      min-height: 24px;
      font-weight: 600;
      color: #ff4c4c;
      letter-spacing: 0.6px;
      user-select: none;
      transition: opacity 0.4s ease;
    }

    .login-box img {
      width: 80px;
      margin-bottom: 20px;
      border-radius: 50%;
    }
  </style>
</head>
<body>

  <div class="login-box">
    <img src="https://media.licdn.com/dms/image/v2/C560BAQFko6j57Cd7ew/company-logo_200_200/company-logo_200_200/0/1630573474832?e=2147483647&v=beta&t=x9OlVqbYPGzniX0ZWa9EgTMZ87DVakvda54AYWDVWJQ" alt="Logo">
    <h2>Primary Student Login</h2>
    <input type="text" id="CidnoInput" placeholder="Enter your Cid Number" />
    <button onclick="login()">Login</button>
    <div id="errorMsg" class="error"></div>
  </div>

  <script>
    const allowedCidno = ["11572","11573","11591","11615","11624","11629","11643","11647","11653","11656",
      "11660","11666","11669","11674","11784","11912","12090","12141","12152","12173",
      "18455","18580","18766","18818","18861","18879","18880","18890","18910","11583",
      "11585","11592","11622","11623","11640","11642","11671","11717","11726","11736",
      "11758","11798","11805","12107","12111","12119","12137","12185","12186","18977",
      "19198","19450","19454","19507","11787","11836","11845","11846","11855","11878",
      "11888","11889","11903","11907","11915","11921","11931","11962","11970","11979",
      "11989","12013","12020","12027","12029","12054","12058","12059","12065","12073",
      "12075","11604","11605","11655","11658","11719","11933","12021","12026","12136",
      "19436","19622","19632","19674","19701","19806","19838","19889","19900","19968",
      "20083","20093","11309","11313","11344","11373","11376","11389","11393","11410",
      "11463","11465","11469","11481","11488","11497","11506","11507","11521","11538",
      "11539","11637","11744","11768","11800","11920","11969","11977","12049","19595",
      "19693","11314","11317","11326","11327","11330","11335","11336","11337","11351",
      "11364","11370","11397","11420","11430", "11464","11467","11470", "11475","11482",
      "11487","11495","11765","11832","11887","11991","12070","12074", "12099","12128",
      "19703","11581", "11584", "11586", "11587", "11588", "11589", "11601", "11606", "11608", "11609",
     "11612", "11617", "11626", "11628", "11630", "11631", "11639", "11644", "11646", "11652",
     "11667", "11685", "11690", "11692", "11847", "11886", "12227", "20086", "11302", "11311",
     "11348", "11779", "11844", "12143", "18490", "18519", "18523", "18527", "18600", "18616",
      "18876", "19033", "19197", "19254", "19282", "19357", "19358", "19432", "19434", "19464",
     "19539", "19829", "19963", "19972", "11129", "11133", "11139", "11144", "11151", "11152",
     "11156", "11161", "11163", "11164", "11165", "11186", "11194", "11211", "11223", "11231",
     "11243", "11245", "11254", "11255", "11477", "11493", "11494", "11580", "11607", "18476",
    "18599", "18856", "18889", "18948", "19839", "11128", "11130", "11132", "11137", "11138", "11142", "11143", "11147", "11148", "11150",
  "11154", "11227", "11235", "11546", "11618", "11632", "11839", "11870", "18494", "18741",
  "19505", "19734", "19786", "19790", "19813", "20015", "20042", "11295", "11298", "11303",
  "11304", "11305", "11308", "11321", "11328", "11329", "11338", "11358", "11374", "11380",
  "11382", "11384", "11407", "11418", "11517", "11519", "11547", "11633", "11693", "11721",
  "12243", "19840", "11141", "11947", "11953", "11954", "11958", "11960", "11964", "11966",
  "11971", "11985", "12005", "12019", "12037", "12077", "12088", "12098", "12100", "12104",
  "12118", "12133", "12163", "12178", "12210", "12217", "12235", "12244", "10961", "10963",
  "10969", "10975", "10978", "10987", "10988", "10995", "11000", "11002", "11003", "11017",
  "11044", "11048", "11090", "11230", "11260", "11316", "11385", "11473", "11945", "11959",
  "12114", "12168", "12170", "18533", "19283", "19360", "19615", "19639", "19987", "20178",
  "10958", "10965", "10966", "10977", "10980", "10985", "10993", "11004", "11005", "11008",
  "11014", "11028", "11032", "11035", "11113", "11122", "11217", "11226", "11256", "11299",
  "11320", "11365", "11548", "11555", "11826", "11973", "12126", "12261", "19921", "19923",
  "19988", "20290", "10933", "10959", "10967", "10968", "10983", "10989", "10990", "11007",
  "11009", "11013", "11018", "11019", "11021", "11030", "11036", "11042", "11089", "11102",
  "11213", "11216", "11257", "11266", "11310", "11324", "11505", "11558", "11796", "11852",
  "12036", "12042", "19789", "19977", "20025", "11567", "11568", "11569", "11570", "11582",
  "11625", "11627", "11650", "11681", "11704", "11706", "11709", "11713", "11715", "11723",
  "11724", "11727", "11729", "11730", "11731", "11741", "11745", "11763", "11890", "11893",
  "12064", "12069", "12183", "18749", "19052", "19828", "10780", "10792", "10794", "10825",
  "10826", "10834", "10848", "10931", "10946", "11115", "11288", "11318", "11325", "11404",
  "11421", "11429", "11738", "11949", "12200", "18499", "18518", "18575", "18877", "18947",
  "19640", "19876", "19922", "20118", "20142","10785", "10789", "10791", "10793", "10797", 
  "10798", "10803", "10805", "10811", "10813", "10821", "10840", "10845", "10864", "10917",
   "11070", "11238", "11277", "11285", "11466","11537", "11619", "11670", "11678", "11759",
    "11786", "11961", "12228", "18474", "19206","19303", "19557", "19702", "19713", "19787", 
    "19815", "10779", "10781", "10783", "10790","10815", "10818", "10827", "10831", "10832", 
    "10835", "10837", "10839", "10854", "10862", "10863", "10941", "10942", "10944", "11058", 
    "11214", "11559", "11804", "11853", "11894", "11997", "18531", "19045", "19444", "19897", 
    "10784", "10796", "10801", "10808", "10809","10833", "10853", "10855", "10899", "10943", 
    "10955", "11116", "11125", "11215", "11228","11278", "11281", "11282", "11283", "11331",
     "11412", "11459", "11461", "11479", "11657","11682", "11703", "11728", "11743", "19911"];

    window.addEventListener("storage", function (event) {
      if (event.key === "primary_reset_signal") {
        Object.keys(localStorage).forEach((key) => {
          if (
            key.startsWith("primary_voted_") || 
            key.startsWith("votes_primary") || 
            key === "primary_current_Cidno"
          ) {
            localStorage.removeItem(key);
          }
        });

        alert("⚠️ Admin has reset all votes. You will be redirected to login.");
        window.location.href = "student primary.html";
      }
    });

    function login() {
      const Cidno = document.getElementById("CidnoInput").value.trim();
      const errorBox = document.getElementById("errorMsg");

      if (Cidno === "") {
        errorBox.textContent = "❌ Please enter your Cid Number.";
        return;
      }

      const numericCidno = Cidno.replace(/\D/g, ""); // Only digits
      if (!allowedCidno.includes(numericCidno)) {
        errorBox.textContent = "❌ Invalid Cid Number.";
        return;
      }

      if (localStorage.getItem("voted-" + numericCidno) === "true") {
        errorBox.textContent = "⚠️ This Cid Number has already been used.";
        return;
      }

      localStorage.setItem("primary_current_Cidno", numericCidno);
      localStorage.setItem("voted-" + numericCidno, "true");

      window.location.href = "headboy primary.html";
    }
  </script>

</body>
</html>
